<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:munit="http://www.mulesoft.org/schema/mule/munit"
	xmlns:munit-tools="http://www.mulesoft.org/schema/mule/munit-tools"
	xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xsi:schemaLocation="
		http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
		http://www.mulesoft.org/schema/mule/munit http://www.mulesoft.org/schema/mule/munit/current/mule-munit.xsd
		http://www.mulesoft.org/schema/mule/munit-tools  http://www.mulesoft.org/schema/mule/munit-tools/current/mule-munit-tools.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
	<munit:config name="implementation-test-suite.xml" />
	<munit:test name="implementation-test-suite-getLaunchesTest"
		doc:id="45c210d9-bef4-4788-870f-3ce577ee2474" description="Test">
		<munit:behavior>
			<ee:transform doc:name="Set launchesResult and rocketsResult"
				doc:id="8bb58879-3ee0-4018-a144-dab5d2432c98">
				<ee:message>
				</ee:message>
				<ee:variables>
					<ee:set-variable variableName="launchesResult"><![CDATA[%dw 2.0
output application/json
---
{
	"count": 2026,
	"next": "https://ll.thespacedevs.com/2.0.0/launch/?limit=10&offset=10",
	"previous": null,
	"results": [{
		"id": "9279744e-46b2-4eca-adea-f1379672ec81",
		"url": "https://ll.thespacedevs.com/2.2.0/launch/9279744e-46b2-4eca-adea-f1379672ec81/",
		"launch_library_id": 1829,
		"slug": "atlas-lv-3a-samos-2",
		"name": "Atlas LV-3A | Samos 2",
		"status": {
			"id": 3,
			"name": "Success"
		},
		"net": "1961-01-31T20:21:19Z",
		"window_end": "1961-01-31T20:21:19Z",
		"window_start": "1961-01-31T20:21:19Z",
		"inhold": false,
		"tbdtime": false,
		"tbddate": false,
		"probability": 0,
		"holdreason": "",
		"failreason": "",
		"hashtag": "",
		"launch_service_provider": {
			"id": 161,
			"url": "https://ll.thespacedevs.com/2.2.0/agencies/161/",
			"name": "United States Air Force",
			"type": "Government"
		},
		"rocket": {
			"id": 2362,
			"configuration": {
				"id": 183,
				"launch_library_id": 193,
				"url": "https://ll.thespacedevs.com/2.2.0/config/launcher/183/",
				"name": "Atlas Agena B",
				"family": "Atlas",
				"full_name": "Atlas LV-3 Agena B",
				"variant": "LV-3 Agena B"
			}
		},
		"mission": null,
		"pad": {
			"id": 93,
			"url": "https://ll.thespacedevs.com/2.2.0/pad/93/",
			"agency_id": 161,
			"name": "Space Launch Complex 3W",
			"info_url": null,
			"wiki_url": "",
			"map_url": "http://maps.google.com/maps?q=34.644+N,+120.593+W",
			"latitude": "34.644",
			"longitude": "-120.593",
			"location": {
				"id": 11,
				"url": "https://ll.thespacedevs.com/2.2.0/location/11/",
				"name": "Vandenberg SFB, CA, USA",
				"country_code": "USA",
				"map_image": "https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/location_11_20200803142416.jpg",
				"total_launch_count": 84,
				"total_landing_count": 3
			},
			"map_image": "https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/pad_93_20200803143225.jpg",
			"total_launch_count": 3
		},
		"webcast_live": false,
		"image": null,
		"infographic": null,
		"program": []
	},
        {
		"id": "c167fb61-648b-4755-9e79-0f049fee985a",
		"url": "https://ll.thespacedevs.com/2.2.0/launch/c167fb61-648b-4755-9e79-0f049fee985a/",
		"launch_library_id": 1830,
		"slug": "molniya-8k78-venera-1va-1",
		"name": "Molniya 8K78 | Venera-1VA 1",
		"status": {
			"id": 4,
			"name": "Failure"
		},
		"net": "1961-02-04T01:18:03Z",
		"window_end": "1961-02-04T01:18:03Z",
		"window_start": "1961-02-04T01:18:03Z",
		"inhold": false,
		"tbdtime": false,
		"tbddate": false,
		"probability": 0,
		"holdreason": "",
		"failreason": "Upper stage failed.",
		"hashtag": "",
		"launch_service_provider": {
			"id": 270,
			"url": "https://ll.thespacedevs.com/2.2.0/agencies/270/",
			"name": "Strategic Missile Troops",
			"type": null
		},
		"rocket": {
			"id": 2363,
			"configuration": {
				"id": 184,
				"launch_library_id": 207,
				"url": "https://ll.thespacedevs.com/2.2.0/config/launcher/184/",
				"name": "Molniya 8K78",
				"family": "Molniya",
				"full_name": "Molniya 8K78",
				"variant": "8K78"
			}
		},
		"mission": null,
		"pad": {
			"id": 32,
			"url": "https://ll.thespacedevs.com/2.2.0/pad/32/",
			"agency_id": null,
			"name": "1/5",
			"info_url": null,
			"wiki_url": "",
			"map_url": "https://www.google.com/maps/place/45Â°55'12.0\"N+63Â°20'31.2\"E",
			"latitude": "45.92",
			"longitude": "63.342",
			"location": {
				"id": 15,
				"url": "https://ll.thespacedevs.com/2.2.0/location/15/",
				"name": "Baikonur Cosmodrome, Republic of Kazakhstan",
				"country_code": "KAZ",
				"map_image": "https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/location_15_20200803142517.jpg",
				"total_launch_count": 473,
				"total_landing_count": 0
			},
			"map_image": "https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/pad_32_20200803143513.jpg",
			"total_launch_count": 292
		},
		"webcast_live": false,
		"image": "https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launcher_images/molniya25208k78_image_20191201210000.jpg",
		"infographic": null,
		"program": []
	}]
}]]></ee:set-variable>
					<ee:set-variable variableName="rocketsResult" ><![CDATA[%dw 2.0
output application/json
---
{
	"count": 461,
	"next": "https://ll.thespacedevs.com/2.2.0/config/launcher/?limit=10&offset=10",
	"previous": null,
	"results": [{
		"id": 183,
		"url": "https://ll.thespacedevs.com/2.2.0/config/launcher/183/",
		"name": "Atlas Agena B",
		"manufacturer": {
			"id": 161,
			"url": "https://ll.thespacedevs.com/2.2.0/agencies/161/",
			"name": "United States Air Force",
			"featured": false,
			"type": "Government",
			"country_code": "USA",
			"abbrev": "USAF",
			"description": null,
			"administrator": null,
			"founding_year": null,
			"launchers": "",
			"spacecraft": "",
			"parent": null,
			"image_url": null
		},
		"program": [],
		"family": "Atlas",
		"full_name": "Atlas LV-3 Agena B",
		"variant": "LV-3 Agena B",
		"reusable": false,
		"image_url": null,
		"info_url": "http://www.astronautix.com/a/atlasagenalv-3a.html",
		"wiki_url": null
	}]
}]]></ee:set-variable>
				</ee:variables>
			</ee:transform>
			<munit-tools:mock-when
				doc:name="Call to launch resource"
				doc:id="0019d80b-cf64-41b0-8b30-c34fbd5d63e2"
				processor="http:request">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Get all launches" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="125ed0d5-3421-4376-beba-1c7fa56f6d7e" attributeName="doc:id" />
					<munit-tools:with-attribute whereValue="HTTP_Request_configuration" attributeName="config-ref" />
					<munit-tools:with-attribute whereValue="/2.0.0/launch" attributeName="path" />
				</munit-tools:with-attributes>
				<munit-tools:then-return>
					<munit-tools:payload
						value="#[vars.launchesResult]" mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when
				doc:name="Call to rocket resource"
				doc:id="86761a48-3748-4cca-9d9c-f8b79fade5ae"
				processor="http:request">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Get rocket by name" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="0e9a6694-35b1-456a-9af2-a8473a57e9e9" attributeName="doc:id" />
					<munit-tools:with-attribute whereValue="HTTP_Request_configuration" attributeName="config-ref" />
					<munit-tools:with-attribute whereValue="/2.2.0/config/launcher/" attributeName="path" />
				</munit-tools:with-attributes>
				<munit-tools:then-return>
					<munit-tools:payload
						value="#[vars.rocketsResult]" mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution>
			<munit:set-event doc:name="Set Event"
				doc:id="268119e2-17a5-4a40-bff6-238283b4a10b"
				cloneOriginalEvent="true">
				<munit:attributes
					value='#[{queryParams: {name: "Atlas Agena B"}}]' />
			</munit:set-event>
			<flow-ref doc:name="Flow-ref to getLaunches"
				doc:id="8055d420-87e7-4760-bd84-f81ec74bb6dd"
				name="getLaunchesByRocketName" />
			<ee:transform doc:name="Expected result"
				doc:id="e68eea99-f09a-4635-868f-cd8216af1090">
				<ee:message>
				</ee:message>
				<ee:variables>
					<ee:set-variable variableName="generalTestResult"><![CDATA[%dw 2.0
output application/json
---
[{
	"launch_info": {
		"id": "9279744e-46b2-4eca-adea-f1379672ec81",
		"name": "atlas-lv-3a-samos-2",
		"status": "Success",
		"launch_date": "1961-01-31",
		"failreason": "",
		"launch_service_provider": "United States Air Force",
		"pad": {
			"name": "Space Launch Complex 3W",
			"location": {
				"name": "Vandenberg SFB, CA, USA",
				"country_code": "USA",
				"total_launch_count": 84,
				"total_landing_count": 3
			}
		},
		"rocket_name": "Atlas Agena B"
	},
	"rocket_info": {
		"name": "Atlas Agena B",
		"manufacturer": {
			"name": "United States Air Force",
			"type": "Government",
			"country_code": "USA"
		},
		"family": "Atlas",
		"full_name": "Atlas LV-3 Agena B",
		"variant": "LV-3 Agena B",
		"reusable": false,
		"image_url": "",
		"wiki_url": ""
	}
}]]]></ee:set-variable>
				</ee:variables>
			</ee:transform>
		</munit:execution>
		<munit:validation>
			<munit-tools:assert-that
				doc:name="Event content equality" doc:id="43f22810-51b4-4702-be32-bd9a11ba0f77"
				is="#[MunitTools::equalTo(vars.generalTestResult)]"
				expression="#[payload]" />
		</munit:validation>
	</munit:test>
	<munit:test name="test-getLaunchesByStatus-with-NO-params"
		doc:id="7cc71a0e-decb-4d37-817c-3929e1d4d59d" description="Test">
		<munit:behavior>
			<ee:transform doc:name="Set launchesRequestResult"
				doc:id="61c0c89f-76bd-4eda-a3cd-6fd7ab6fe36e">
				<ee:message>
				</ee:message>
				<ee:variables>
					<ee:set-variable
						variableName="launchesRequestResult"><![CDATA[%dw 2.0
output application/json
---
{
    "count": 2026,
    "next": "https://ll.thespacedevs.com/2.0.0/launch/?limit=10&offset=10",
    "previous": null,
    "results": [
        {
            "id": "9279744e-46b2-4eca-adea-f1379672ec81",
            "url": "https://ll.thespacedevs.com/2.2.0/launch/9279744e-46b2-4eca-adea-f1379672ec81/",
            "launch_library_id": 1829,
            "slug": "atlas-lv-3a-samos-2",
            "name": "Atlas LV-3A | Samos 2",
            "status": {
                "id": 3,
                "name": "Success"
            },
            "net": "1961-01-31T20:21:19Z",
            "window_end": "1961-01-31T20:21:19Z",
            "window_start": "1961-01-31T20:21:19Z",
            "inhold": false,
            "tbdtime": false,
            "tbddate": false,
            "probability": 0,
            "holdreason": "",
            "failreason": "",
            "hashtag": "",
            "launch_service_provider": {
                "id": 161,
                "url": "https://ll.thespacedevs.com/2.2.0/agencies/161/",
                "name": "United States Air Force",
                "type": "Government"
            },
            "rocket": {
                "id": 2362,
                "configuration": {
                    "id": 183,
                    "launch_library_id": 193,
                    "url": "https://ll.thespacedevs.com/2.2.0/config/launcher/183/",
                    "name": "Atlas Agena B",
                    "family": "Atlas",
                    "full_name": "Atlas LV-3 Agena B",
                    "variant": "LV-3 Agena B"
                }
            },
            "mission": null,
            "pad": {
                "id": 93,
                "url": "https://ll.thespacedevs.com/2.2.0/pad/93/",
                "agency_id": 161,
                "name": "Space Launch Complex 3W",
                "info_url": null,
                "wiki_url": "",
                "map_url": "http://maps.google.com/maps?q=34.644+N,+120.593+W",
                "latitude": "34.644",
                "longitude": "-120.593",
                "location": {
                    "id": 11,
                    "url": "https://ll.thespacedevs.com/2.2.0/location/11/",
                    "name": "Vandenberg SFB, CA, USA",
                    "country_code": "USA",
                    "map_image": "https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/location_11_20200803142416.jpg",
                    "total_launch_count": 84,
                    "total_landing_count": 3
                },
                "map_image": "https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/pad_93_20200803143225.jpg",
                "total_launch_count": 3
            },
            "webcast_live": false,
            "image": null,
            "infographic": null,
            "program": []
        },
        {
            "id": "c167fb61-648b-4755-9e79-0f049fee985a",
            "url": "https://ll.thespacedevs.com/2.2.0/launch/c167fb61-648b-4755-9e79-0f049fee985a/",
            "launch_library_id": 1830,
            "slug": "molniya-8k78-venera-1va-1",
            "name": "Molniya 8K78 | Venera-1VA 1",
            "status": {
                "id": 4,
                "name": "Failure"
            },
            "net": "1961-02-04T01:18:03Z",
            "window_end": "1961-02-04T01:18:03Z",
            "window_start": "1961-02-04T01:18:03Z",
            "inhold": false,
            "tbdtime": false,
            "tbddate": false,
            "probability": 0,
            "holdreason": "",
            "failreason": "Upper stage failed.",
            "hashtag": "",
            "launch_service_provider": {
                "id": 270,
                "url": "https://ll.thespacedevs.com/2.2.0/agencies/270/",
                "name": "Strategic Missile Troops",
                "type": null
            },
            "rocket": {
                "id": 2363,
                "configuration": {
                    "id": 184,
                    "launch_library_id": 207,
                    "url": "https://ll.thespacedevs.com/2.2.0/config/launcher/184/",
                    "name": "Molniya 8K78",
                    "family": "Molniya",
                    "full_name": "Molniya 8K78",
                    "variant": "8K78"
                }
            },
            "mission": null,
            "pad": {
                "id": 32,
                "url": "https://ll.thespacedevs.com/2.2.0/pad/32/",
                "agency_id": null,
                "name": "1/5",
                "info_url": null,
                "wiki_url": "",
                "map_url": "https://www.google.com/maps/place/45Â°55'12.0\"N+63Â°20'31.2\"E",
                "latitude": "45.92",
                "longitude": "63.342",
                "location": {
                    "id": 15,
                    "url": "https://ll.thespacedevs.com/2.2.0/location/15/",
                    "name": "Baikonur Cosmodrome, Republic of Kazakhstan",
                    "country_code": "KAZ",
                    "map_image": "https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/location_15_20200803142517.jpg",
                    "total_launch_count": 473,
                    "total_landing_count": 0
                },
                "map_image": "https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/pad_32_20200803143513.jpg",
                "total_launch_count": 292
            },
            "webcast_live": false,
            "image": "https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launcher_images/molniya25208k78_image_20191201210000.jpg",
            "infographic": null,
            "program": []
        }
    ]
}]]></ee:set-variable>
				</ee:variables>
			</ee:transform>
			<munit-tools:mock-when
				doc:name="Call to launch resource"
				doc:id="1540975d-a1e0-443b-a753-7b7b8f1641a0"
				processor="http:request">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute
						whereValue="Get all launches" attributeName="doc:name" />
					<munit-tools:with-attribute
						whereValue="60f29e73-565c-4d39-bf19-73fe131b0fad"
						attributeName="doc:id" />
					<munit-tools:with-attribute
						whereValue="HTTP_Request_configuration" attributeName="config-ref" />
					<munit-tools:with-attribute
						whereValue="/2.0.0/launch" attributeName="path" />
					<munit-tools:with-attribute
						whereValue="Get all launches" attributeName="doc:name" />
					<munit-tools:with-attribute
						whereValue="60f29e73-565c-4d39-bf19-73fe131b0fad"
						attributeName="doc:id" />
					<munit-tools:with-attribute
						whereValue="HTTP_Request_configuration" attributeName="config-ref" />
					<munit-tools:with-attribute
						whereValue="/2.0.0/launch" attributeName="path" />
				</munit-tools:with-attributes>
				<munit-tools:then-return>
					<munit-tools:payload
						value="#[vars.launchesRequestResult]" mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution>
			<flow-ref doc:name="Flow-ref to getLaunchesByStatus"
				doc:id="a5f35f67-ce76-45e2-a4a3-eb18d31c0d0a"
				name="getLaunchesByStatusAndYear" />
			<ee:transform doc:name="Expected result (allLaunches)"
				doc:id="fc00e411-8d13-4cc4-af62-63367da708a5">
				<ee:message>
				</ee:message>
				<ee:variables>
					<ee:set-variable variableName="allLaunches"><![CDATA[%dw 2.0
output application/json
---
{
	"launch_count": 2,
	"launches": [{
		"id": "9279744e-46b2-4eca-adea-f1379672ec81",
		"slug": "atlas-lv-3a-samos-2",
		"name": "Atlas LV-3A | Samos 2",
		"status": "Success",
		"launch_year": "1961",
		"failreason": "",
		"launch_service_provider": "United States Air Force",
		"rocket": {
			"name": "Atlas Agena B",
			"family": "Atlas",
			"full_name": "Atlas LV-3 Agena B",
			"variant": "LV-3 Agena B"
		},
		"pad": {
			"name": "Space Launch Complex 3W",
			"location": {
				"name": "Vandenberg SFB, CA, USA",
				"country_code": "USA",
				"total_launch_count": 84,
				"total_landing_count": 3
			}
		}
	},
	{
		"id": "c167fb61-648b-4755-9e79-0f049fee985a",
		"slug": "molniya-8k78-venera-1va-1",
		"name": "Molniya 8K78 | Venera-1VA 1",
		"status": "Failure",
		"launch_year": "1961",
		"failreason": "Upper stage failed.",
		"launch_service_provider": "Strategic Missile Troops",
		"rocket": {
			"name": "Molniya 8K78",
			"family": "Molniya",
			"full_name": "Molniya 8K78",
			"variant": "8K78"
		},
		"pad": {
			"name": "1/5",
			"location": {
				"name": "Baikonur Cosmodrome, Republic of Kazakhstan",
				"country_code": "KAZ",
				"total_launch_count": 473,
				"total_landing_count": 0
			}
		}
	}]
}
]]></ee:set-variable>
				</ee:variables>
			</ee:transform>
		</munit:execution>
		<munit:validation>
			<munit-tools:assert-that
				doc:name="Event content equality" doc:id="c5ba96b3-cafb-48ab-8b30-3961420a36da"
				is="#[MunitTools::equalTo(vars.allLaunches)]"
				expression="#[payload]" />
		</munit:validation>
	</munit:test>
	<munit:test
		name="test-getLaunchesByStatus-with-filter-by-status"
		doc:id="291c4619-333e-4137-b5d8-311d2d496fe7" description="Test">
		<munit:behavior>
			<ee:transform doc:name="Set launchesByStatusResult"
				doc:id="0fcac273-5ef6-4995-b75d-0e04b0dff0bd">
				<ee:message>
				</ee:message>
				<ee:variables>
					<ee:set-variable
						variableName="launchesByStatusResult"><![CDATA[%dw 2.0
output application/json
---
{
    "count": 2026,
    "next": "https://ll.thespacedevs.com/2.0.0/launch/?limit=10&offset=10",
    "previous": null,
    "results": [
        {
            "id": "9279744e-46b2-4eca-adea-f1379672ec81",
            "url": "https://ll.thespacedevs.com/2.2.0/launch/9279744e-46b2-4eca-adea-f1379672ec81/",
            "launch_library_id": 1829,
            "slug": "atlas-lv-3a-samos-2",
            "name": "Atlas LV-3A | Samos 2",
            "status": {
                "id": 3,
                "name": "Success"
            },
            "net": "1961-01-31T20:21:19Z",
            "window_end": "1961-01-31T20:21:19Z",
            "window_start": "1961-01-31T20:21:19Z",
            "inhold": false,
            "tbdtime": false,
            "tbddate": false,
            "probability": 0,
            "holdreason": "",
            "failreason": "",
            "hashtag": "",
            "launch_service_provider": {
                "id": 161,
                "url": "https://ll.thespacedevs.com/2.2.0/agencies/161/",
                "name": "United States Air Force",
                "type": "Government"
            },
            "rocket": {
                "id": 2362,
                "configuration": {
                    "id": 183,
                    "launch_library_id": 193,
                    "url": "https://ll.thespacedevs.com/2.2.0/config/launcher/183/",
                    "name": "Atlas Agena B",
                    "family": "Atlas",
                    "full_name": "Atlas LV-3 Agena B",
                    "variant": "LV-3 Agena B"
                }
            },
            "mission": null,
            "pad": {
                "id": 93,
                "url": "https://ll.thespacedevs.com/2.2.0/pad/93/",
                "agency_id": 161,
                "name": "Space Launch Complex 3W",
                "info_url": null,
                "wiki_url": "",
                "map_url": "http://maps.google.com/maps?q=34.644+N,+120.593+W",
                "latitude": "34.644",
                "longitude": "-120.593",
                "location": {
                    "id": 11,
                    "url": "https://ll.thespacedevs.com/2.2.0/location/11/",
                    "name": "Vandenberg SFB, CA, USA",
                    "country_code": "USA",
                    "map_image": "https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/location_11_20200803142416.jpg",
                    "total_launch_count": 84,
                    "total_landing_count": 3
                },
                "map_image": "https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/pad_93_20200803143225.jpg",
                "total_launch_count": 3
            },
            "webcast_live": false,
            "image": null,
            "infographic": null,
            "program": []
        },
        {
            "id": "c167fb61-648b-4755-9e79-0f049fee985a",
            "url": "https://ll.thespacedevs.com/2.2.0/launch/c167fb61-648b-4755-9e79-0f049fee985a/",
            "launch_library_id": 1830,
            "slug": "molniya-8k78-venera-1va-1",
            "name": "Molniya 8K78 | Venera-1VA 1",
            "status": {
                "id": 4,
                "name": "Failure"
            },
            "net": "1961-02-04T01:18:03Z",
            "window_end": "1961-02-04T01:18:03Z",
            "window_start": "1961-02-04T01:18:03Z",
            "inhold": false,
            "tbdtime": false,
            "tbddate": false,
            "probability": 0,
            "holdreason": "",
            "failreason": "Upper stage failed.",
            "hashtag": "",
            "launch_service_provider": {
                "id": 270,
                "url": "https://ll.thespacedevs.com/2.2.0/agencies/270/",
                "name": "Strategic Missile Troops",
                "type": null
            },
            "rocket": {
                "id": 2363,
                "configuration": {
                    "id": 184,
                    "launch_library_id": 207,
                    "url": "https://ll.thespacedevs.com/2.2.0/config/launcher/184/",
                    "name": "Molniya 8K78",
                    "family": "Molniya",
                    "full_name": "Molniya 8K78",
                    "variant": "8K78"
                }
            },
            "mission": null,
            "pad": {
                "id": 32,
                "url": "https://ll.thespacedevs.com/2.2.0/pad/32/",
                "agency_id": null,
                "name": "1/5",
                "info_url": null,
                "wiki_url": "",
                "map_url": "https://www.google.com/maps/place/45Â°55'12.0\"N+63Â°20'31.2\"E",
                "latitude": "45.92",
                "longitude": "63.342",
                "location": {
                    "id": 15,
                    "url": "https://ll.thespacedevs.com/2.2.0/location/15/",
                    "name": "Baikonur Cosmodrome, Republic of Kazakhstan",
                    "country_code": "KAZ",
                    "map_image": "https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/location_15_20200803142517.jpg",
                    "total_launch_count": 473,
                    "total_landing_count": 0
                },
                "map_image": "https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/pad_32_20200803143513.jpg",
                "total_launch_count": 292
            },
            "webcast_live": false,
            "image": "https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launcher_images/molniya25208k78_image_20191201210000.jpg",
            "infographic": null,
            "program": []
        }
    ]
}]]></ee:set-variable>
				</ee:variables>
			</ee:transform>
			<munit-tools:mock-when
				doc:name="Call to launch resource"
				doc:id="253cbaf1-aeb7-412f-b720-256ecc4b28da"
				processor="http:request">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute
						whereValue="Get all launches" attributeName="doc:name" />
					<munit-tools:with-attribute
						whereValue="60f29e73-565c-4d39-bf19-73fe131b0fad"
						attributeName="doc:id" />
					<munit-tools:with-attribute
						whereValue="HTTP_Request_configuration" attributeName="config-ref" />
					<munit-tools:with-attribute
						whereValue="/2.0.0/launch" attributeName="path" />
					<munit-tools:with-attribute
						whereValue="Get all launches" attributeName="doc:name" />
					<munit-tools:with-attribute
						whereValue="60f29e73-565c-4d39-bf19-73fe131b0fad"
						attributeName="doc:id" />
					<munit-tools:with-attribute
						whereValue="HTTP_Request_configuration" attributeName="config-ref" />
					<munit-tools:with-attribute
						whereValue="/2.0.0/launch" attributeName="path" />
				</munit-tools:with-attributes>
				<munit-tools:then-return>
					<munit-tools:payload
						value="#[vars.launchesByStatusResult]"
						mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution>
			<munit:set-event doc:name="Set Event"
				doc:id="6b3f28ed-83e9-424c-b49b-9d3e490ac23b"
				cloneOriginalEvent="true">
				<munit:attributes
					value='#[{queryParams: {status: "Failure"}}]' />
			</munit:set-event>
			<flow-ref doc:name="Flow-ref to getLaunchesByStatus"
				doc:id="19830d36-ff86-444d-b007-afa09633f8cb"
				name="getLaunchesByStatusAndYear" />
			<ee:transform
				doc:name="Expected result (launches by status)"
				doc:id="00009f8e-9b08-4939-8894-b203408200fe">
				<ee:message>
				</ee:message>
				<ee:variables>
					<ee:set-variable variableName="launchesByStatus"><![CDATA[%dw 2.0
output application/json
---
{
	"launch_count": 1,
	"launches": [{
		"id": "c167fb61-648b-4755-9e79-0f049fee985a",
		"slug": "molniya-8k78-venera-1va-1",
		"name": "Molniya 8K78 | Venera-1VA 1",
		"status": "Failure",
		"launch_year": "1961",
		"failreason": "Upper stage failed.",
		"launch_service_provider": "Strategic Missile Troops",
		"rocket": {
			"name": "Molniya 8K78",
			"family": "Molniya",
			"full_name": "Molniya 8K78",
			"variant": "8K78"
		},
		"pad": {
			"name": "1/5",
			"location": {
				"name": "Baikonur Cosmodrome, Republic of Kazakhstan",
				"country_code": "KAZ",
				"total_launch_count": 473,
				"total_landing_count": 0
			}
		}
	}]
}
]]></ee:set-variable>
				</ee:variables>
			</ee:transform>
		</munit:execution>
		<munit:validation>
			<munit-tools:assert-that
				doc:name="Event content equality" doc:id="64916bf8-4c6c-4e1f-9b87-31cebe2224b3"
				is="#[MunitTools::equalTo(vars.launchesByStatus)]"
				expression="#[payload]" />
		</munit:validation>
	</munit:test>
	<munit:test
		name="test-getLaunchesByStatus-with-filter-by-year"
		doc:id="ea85e0b5-80c0-4b1a-912a-6ed7dd8c736f" description="Test">
		<munit:behavior>
			<ee:transform doc:name="Set launchesByYearResult"
				doc:id="cfe63f75-bb53-41ce-8547-7a05ab0a0db4">
				<ee:message>
				</ee:message>
				<ee:variables>
					<ee:set-variable
						variableName="launchesByYearResult"><![CDATA[%dw 2.0
output application/json
---
{
	"count": 2026,
	"next": "https://ll.thespacedevs.com/2.0.0/launch/?limit=10&offset=10",
	"previous": null,
	"results": [{
		"id": "9279744e-46b2-4eca-adea-f1379672ec81",
		"url": "https://ll.thespacedevs.com/2.2.0/launch/9279744e-46b2-4eca-adea-f1379672ec81/",
		"launch_library_id": 1829,
		"slug": "atlas-lv-3a-samos-2",
		"name": "Atlas LV-3A | Samos 2",
		"status": {
			"id": 3,
			"name": "Success"
		},
		"net": "1961-01-31T20:21:19Z",
		"window_end": "1961-01-31T20:21:19Z",
		"window_start": "1961-01-31T20:21:19Z",
		"inhold": false,
		"tbdtime": false,
		"tbddate": false,
		"probability": 0,
		"holdreason": "",
		"failreason": "",
		"hashtag": "",
		"launch_service_provider": {
			"id": 161,
			"url": "https://ll.thespacedevs.com/2.2.0/agencies/161/",
			"name": "United States Air Force",
			"type": "Government"
		},
		"rocket": {
			"id": 2362,
			"configuration": {
				"id": 183,
				"launch_library_id": 193,
				"url": "https://ll.thespacedevs.com/2.2.0/config/launcher/183/",
				"name": "Atlas Agena B",
				"family": "Atlas",
				"full_name": "Atlas LV-3 Agena B",
				"variant": "LV-3 Agena B"
			}
		},
		"mission": null,
		"pad": {
			"id": 93,
			"url": "https://ll.thespacedevs.com/2.2.0/pad/93/",
			"agency_id": 161,
			"name": "Space Launch Complex 3W",
			"info_url": null,
			"wiki_url": "",
			"map_url": "http://maps.google.com/maps?q=34.644+N,+120.593+W",
			"latitude": "34.644",
			"longitude": "-120.593",
			"location": {
				"id": 11,
				"url": "https://ll.thespacedevs.com/2.2.0/location/11/",
				"name": "Vandenberg SFB, CA, USA",
				"country_code": "USA",
				"map_image": "https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/location_11_20200803142416.jpg",
				"total_launch_count": 84,
				"total_landing_count": 3
			},
			"map_image": "https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/pad_93_20200803143225.jpg",
			"total_launch_count": 3
		},
		"webcast_live": false,
		"image": null,
		"infographic": null,
		"program": []
	},
        {
		"id": "c167fb61-648b-4755-9e79-0f049fee985a",
		"url": "https://ll.thespacedevs.com/2.2.0/launch/c167fb61-648b-4755-9e79-0f049fee985a/",
		"launch_library_id": 1830,
		"slug": "molniya-8k78-venera-1va-1",
		"name": "Molniya 8K78 | Venera-1VA 1",
		"status": {
			"id": 4,
			"name": "Failure"
		},
		"net": "1961-02-04T01:18:03Z",
		"window_end": "1961-02-04T01:18:03Z",
		"window_start": "1961-02-04T01:18:03Z",
		"inhold": false,
		"tbdtime": false,
		"tbddate": false,
		"probability": 0,
		"holdreason": "",
		"failreason": "Upper stage failed.",
		"hashtag": "",
		"launch_service_provider": {
			"id": 270,
			"url": "https://ll.thespacedevs.com/2.2.0/agencies/270/",
			"name": "Strategic Missile Troops",
			"type": null
		},
		"rocket": {
			"id": 2363,
			"configuration": {
				"id": 184,
				"launch_library_id": 207,
				"url": "https://ll.thespacedevs.com/2.2.0/config/launcher/184/",
				"name": "Molniya 8K78",
				"family": "Molniya",
				"full_name": "Molniya 8K78",
				"variant": "8K78"
			}
		},
		"mission": null,
		"pad": {
			"id": 32,
			"url": "https://ll.thespacedevs.com/2.2.0/pad/32/",
			"agency_id": null,
			"name": "1/5",
			"info_url": null,
			"wiki_url": "",
			"map_url": "https://www.google.com/maps/place/45Â°55'12.0\"N+63Â°20'31.2\"E",
			"latitude": "45.92",
			"longitude": "63.342",
			"location": {
				"id": 15,
				"url": "https://ll.thespacedevs.com/2.2.0/location/15/",
				"name": "Baikonur Cosmodrome, Republic of Kazakhstan",
				"country_code": "KAZ",
				"map_image": "https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/location_15_20200803142517.jpg",
				"total_launch_count": 473,
				"total_landing_count": 0
			},
			"map_image": "https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/pad_32_20200803143513.jpg",
			"total_launch_count": 292
		},
		"webcast_live": false,
		"image": "https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launcher_images/molniya25208k78_image_20191201210000.jpg",
		"infographic": null,
		"program": []
	}]
}]]></ee:set-variable>
				</ee:variables>
			</ee:transform>
			<munit-tools:mock-when
				doc:name="Call to launch resource"
				doc:id="287134de-856d-4250-ad52-3b8db46b38ad"
				processor="http:request">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute
						whereValue="Get all launches" attributeName="doc:name" />
					<munit-tools:with-attribute
						whereValue="60f29e73-565c-4d39-bf19-73fe131b0fad"
						attributeName="doc:id" />
					<munit-tools:with-attribute
						whereValue="HTTP_Request_configuration" attributeName="config-ref" />
					<munit-tools:with-attribute
						whereValue="/2.0.0/launch" attributeName="path" />
					<munit-tools:with-attribute
						whereValue="Get all launches" attributeName="doc:name" />
					<munit-tools:with-attribute
						whereValue="60f29e73-565c-4d39-bf19-73fe131b0fad"
						attributeName="doc:id" />
					<munit-tools:with-attribute
						whereValue="HTTP_Request_configuration" attributeName="config-ref" />
					<munit-tools:with-attribute
						whereValue="/2.0.0/launch" attributeName="path" />
				</munit-tools:with-attributes>
				<munit-tools:then-return>
					<munit-tools:payload
						value="#[vars.launchesByYearResult]" mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution>
			<munit:set-event doc:name="Set Event"
				doc:id="3cd54a68-f264-4d5e-9019-077a6dc6e999"
				cloneOriginalEvent="true">
				<munit:attributes
					value='#[{queryParams: {launch_year: "1961"}}]' />
			</munit:set-event>
			<flow-ref doc:name="Flow-ref to getLaunchesByStatus"
				doc:id="ea82fa1b-9759-4624-b662-dbbad8c1e7b0"
				name="getLaunchesByStatusAndYear" />
			<ee:transform
				doc:name="Expected result (launches by year)"
				doc:id="2abcbabb-fef6-4abd-a116-9ffa8729d19b">
				<ee:message>
				</ee:message>
				<ee:variables>
					<ee:set-variable variableName="launchesByYear"><![CDATA[%dw 2.0
output application/json
---
{
    "launch_count": 2,
    "launches": [
        {
            "id": "9279744e-46b2-4eca-adea-f1379672ec81",
            "slug": "atlas-lv-3a-samos-2",
            "name": "Atlas LV-3A | Samos 2",
            "status": "Success",
            "launch_year": "1961",
            "failreason": "",
            "launch_service_provider": "United States Air Force",
            "rocket": {
                "name": "Atlas Agena B",
                "family": "Atlas",
                "full_name": "Atlas LV-3 Agena B",
                "variant": "LV-3 Agena B"
            },
            "pad": {
                "name": "Space Launch Complex 3W",
                "location": {
                    "name": "Vandenberg SFB, CA, USA",
                    "country_code": "USA",
                    "total_launch_count": 84,
                    "total_landing_count": 3
                }
            }
        },
        {
            "id": "c167fb61-648b-4755-9e79-0f049fee985a",
            "slug": "molniya-8k78-venera-1va-1",
            "name": "Molniya 8K78 | Venera-1VA 1",
            "status": "Failure",
            "launch_year": "1961",
            "failreason": "Upper stage failed.",
            "launch_service_provider": "Strategic Missile Troops",
            "rocket": {
                "name": "Molniya 8K78",
                "family": "Molniya",
                "full_name": "Molniya 8K78",
                "variant": "8K78"
            },
            "pad": {
                "name": "1/5",
                "location": {
                    "name": "Baikonur Cosmodrome, Republic of Kazakhstan",
                    "country_code": "KAZ",
                    "total_launch_count": 473,
                    "total_landing_count": 0
                }
            }
        }
    ]
}
]]></ee:set-variable>
				</ee:variables>
			</ee:transform>
		</munit:execution>
		<munit:validation>
			<munit-tools:assert-that
				doc:name="Event content equality" doc:id="48eb71e2-6869-4880-8f51-0bfdf6728312"
				is="#[MunitTools::equalTo(vars.launchesByYear)]"
				expression="#[payload]" />
		</munit:validation>
	</munit:test>
	<munit:test
		name="test-getLaunchesByStatus-with-filter-by-status-and-year"
		doc:id="83d32bcd-9fa7-44b2-9943-cd48523787e2" description="Test">
		<munit:behavior>
			<ee:transform doc:name="Set launchesByStatusAndYearResult"
				doc:id="ff423658-815a-4224-acfa-62bc358f39cc">
				<ee:message>
				</ee:message>
				<ee:variables>
					<ee:set-variable
						variableName="launchesByStatusAndYearResult"><![CDATA[%dw 2.0
output application/json
---
{
	"count": 2026,
	"next": "https://ll.thespacedevs.com/2.0.0/launch/?limit=10&offset=10",
	"previous": null,
	"results": [{
		"id": "9279744e-46b2-4eca-adea-f1379672ec81",
		"url": "https://ll.thespacedevs.com/2.2.0/launch/9279744e-46b2-4eca-adea-f1379672ec81/",
		"launch_library_id": 1829,
		"slug": "atlas-lv-3a-samos-2",
		"name": "Atlas LV-3A | Samos 2",
		"status": {
			"id": 3,
			"name": "Success"
		},
		"net": "1961-01-31T20:21:19Z",
		"window_end": "1961-01-31T20:21:19Z",
		"window_start": "1961-01-31T20:21:19Z",
		"inhold": false,
		"tbdtime": false,
		"tbddate": false,
		"probability": 0,
		"holdreason": "",
		"failreason": "",
		"hashtag": "",
		"launch_service_provider": {
			"id": 161,
			"url": "https://ll.thespacedevs.com/2.2.0/agencies/161/",
			"name": "United States Air Force",
			"type": "Government"
		},
		"rocket": {
			"id": 2362,
			"configuration": {
				"id": 183,
				"launch_library_id": 193,
				"url": "https://ll.thespacedevs.com/2.2.0/config/launcher/183/",
				"name": "Atlas Agena B",
				"family": "Atlas",
				"full_name": "Atlas LV-3 Agena B",
				"variant": "LV-3 Agena B"
			}
		},
		"mission": null,
		"pad": {
			"id": 93,
			"url": "https://ll.thespacedevs.com/2.2.0/pad/93/",
			"agency_id": 161,
			"name": "Space Launch Complex 3W",
			"info_url": null,
			"wiki_url": "",
			"map_url": "http://maps.google.com/maps?q=34.644+N,+120.593+W",
			"latitude": "34.644",
			"longitude": "-120.593",
			"location": {
				"id": 11,
				"url": "https://ll.thespacedevs.com/2.2.0/location/11/",
				"name": "Vandenberg SFB, CA, USA",
				"country_code": "USA",
				"map_image": "https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/location_11_20200803142416.jpg",
				"total_launch_count": 84,
				"total_landing_count": 3
			},
			"map_image": "https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/pad_93_20200803143225.jpg",
			"total_launch_count": 3
		},
		"webcast_live": false,
		"image": null,
		"infographic": null,
		"program": []
	},
        {
		"id": "c167fb61-648b-4755-9e79-0f049fee985a",
		"url": "https://ll.thespacedevs.com/2.2.0/launch/c167fb61-648b-4755-9e79-0f049fee985a/",
		"launch_library_id": 1830,
		"slug": "molniya-8k78-venera-1va-1",
		"name": "Molniya 8K78 | Venera-1VA 1",
		"status": {
			"id": 4,
			"name": "Failure"
		},
		"net": "1961-02-04T01:18:03Z",
		"window_end": "1961-02-04T01:18:03Z",
		"window_start": "1961-02-04T01:18:03Z",
		"inhold": false,
		"tbdtime": false,
		"tbddate": false,
		"probability": 0,
		"holdreason": "",
		"failreason": "Upper stage failed.",
		"hashtag": "",
		"launch_service_provider": {
			"id": 270,
			"url": "https://ll.thespacedevs.com/2.2.0/agencies/270/",
			"name": "Strategic Missile Troops",
			"type": null
		},
		"rocket": {
			"id": 2363,
			"configuration": {
				"id": 184,
				"launch_library_id": 207,
				"url": "https://ll.thespacedevs.com/2.2.0/config/launcher/184/",
				"name": "Molniya 8K78",
				"family": "Molniya",
				"full_name": "Molniya 8K78",
				"variant": "8K78"
			}
		},
		"mission": null,
		"pad": {
			"id": 32,
			"url": "https://ll.thespacedevs.com/2.2.0/pad/32/",
			"agency_id": null,
			"name": "1/5",
			"info_url": null,
			"wiki_url": "",
			"map_url": "https://www.google.com/maps/place/45Â°55'12.0\"N+63Â°20'31.2\"E",
			"latitude": "45.92",
			"longitude": "63.342",
			"location": {
				"id": 15,
				"url": "https://ll.thespacedevs.com/2.2.0/location/15/",
				"name": "Baikonur Cosmodrome, Republic of Kazakhstan",
				"country_code": "KAZ",
				"map_image": "https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/location_15_20200803142517.jpg",
				"total_launch_count": 473,
				"total_landing_count": 0
			},
			"map_image": "https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/pad_32_20200803143513.jpg",
			"total_launch_count": 292
		},
		"webcast_live": false,
		"image": "https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launcher_images/molniya25208k78_image_20191201210000.jpg",
		"infographic": null,
		"program": []
	}]
}]]></ee:set-variable>
				</ee:variables>
			</ee:transform>
			<munit-tools:mock-when
				doc:name="Call to launch resource"
				doc:id="7629371d-0c7b-4a3d-bace-d621b356b3c4"
				processor="http:request">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute
						whereValue="Get all launches" attributeName="doc:name" />
					<munit-tools:with-attribute
						whereValue="60f29e73-565c-4d39-bf19-73fe131b0fad"
						attributeName="doc:id" />
					<munit-tools:with-attribute
						whereValue="HTTP_Request_configuration" attributeName="config-ref" />
					<munit-tools:with-attribute
						whereValue="/2.0.0/launch" attributeName="path" />
					<munit-tools:with-attribute
						whereValue="Get all launches" attributeName="doc:name" />
					<munit-tools:with-attribute
						whereValue="60f29e73-565c-4d39-bf19-73fe131b0fad"
						attributeName="doc:id" />
					<munit-tools:with-attribute
						whereValue="HTTP_Request_configuration" attributeName="config-ref" />
					<munit-tools:with-attribute
						whereValue="/2.0.0/launch" attributeName="path" />
				</munit-tools:with-attributes>
				<munit-tools:then-return>
					<munit-tools:payload
						value="#[vars.launchesByStatusAndYearResult]"
						mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution>
			<munit:set-event doc:name="Set Event"
				doc:id="e9846506-2d9c-47fb-a789-3fc12522b12f"
				cloneOriginalEvent="true">
				<munit:attributes
					value='#[{queryParams: {status: "Failure", launch_year: "1961"}}]' />
			</munit:set-event>
			<flow-ref doc:name="Flow-ref to getLaunchesByStatus"
				doc:id="e046df52-817b-45c2-8a68-e884b7477f26"
				name="getLaunchesByStatusAndYear" />
			<ee:transform
				doc:name="Expected result (launches by status and year)"
				doc:id="0cd8f0b3-802f-4364-a29b-7c7504b8b6a9">
				<ee:message>
				</ee:message>
				<ee:variables>
					<ee:set-variable
						variableName="launchesByStatusAndYear"><![CDATA[%dw 2.0
output application/json
---
{
	"launch_count": 1,
	"launches": [{
		"id": "c167fb61-648b-4755-9e79-0f049fee985a",
		"slug": "molniya-8k78-venera-1va-1",
		"name": "Molniya 8K78 | Venera-1VA 1",
		"status": "Failure",
		"launch_year": "1961",
		"failreason": "Upper stage failed.",
		"launch_service_provider": "Strategic Missile Troops",
		"rocket": {
			"name": "Molniya 8K78",
			"family": "Molniya",
			"full_name": "Molniya 8K78",
			"variant": "8K78"
		},
		"pad": {
			"name": "1/5",
			"location": {
				"name": "Baikonur Cosmodrome, Republic of Kazakhstan",
				"country_code": "KAZ",
				"total_launch_count": 473,
				"total_landing_count": 0
			}
		}
	}]
}
]]></ee:set-variable>
				</ee:variables>
			</ee:transform>
		</munit:execution>
		<munit:validation>
			<munit-tools:assert-that
				doc:name="Event content equality" doc:id="1bc9c156-ac61-4b0c-881a-64f72906f825"
				is="#[MunitTools::equalTo(vars.launchesByStatusAndYear)]"
				expression="#[payload]" />
		</munit:validation>
	</munit:test>
	<munit:test
		name="implementation-test-suite-getLaunchesByLaunchNameTest"
		doc:id="746ed2f4-4108-44e2-b110-14ba43c80a7d" description="Test">
		<munit:behavior>
			<ee:transform doc:name="Set launchesResult and rocketsResult"
				doc:id="c8af850f-4b59-4698-90a3-84b8edbbfe4b">
				<ee:message />
				<ee:variables>
					<ee:set-variable variableName="launchesResult"><![CDATA[%dw 2.0
output application/json
---
{
	"count": 2026,
	"next": "https://ll.thespacedevs.com/2.0.0/launch/?limit=10&offset=10",
	"previous": null,
	"results": [{
		"id": "7e00f7c3-7648-450a-a69b-6bc94e317d04",
		"url": "https://lldev.thespacedevs.com/2.2.0/launch/7e00f7c3-7648-450a-a69b-6bc94e317d04/",
		"launch_library_id": 1837,
		"slug": "vostok-k-sputnik-9",
		"name": "Vostok-K | Sputnik 9",
		"status": {
			"id": 3,
			"name": "Success"
		},
		"net": "1961-03-09T06:29:00Z",
		"window_end": "1961-03-09T06:29:00Z",
		"window_start": "1961-03-09T06:29:00Z",
		"inhold": false,
		"tbdtime": false,
		"tbddate": false,
		"probability": 0,
		"holdreason": "",
		"failreason": "",
		"hashtag": "",
		"launch_service_provider": {
			"id": 270,
			"url": "https://lldev.thespacedevs.com/2.2.0/agencies/270/",
			"name": "Strategic Missile Troops",
			"type": null
		},
		"rocket": {
			"id": 2370,
			"configuration": {
				"id": 103,
				"launch_library_id": 139,
				"url": "https://lldev.thespacedevs.com/2.2.0/config/launcher/103/",
				"name": "Vostok",
				"family": "R-7",
				"full_name": "Vostok-K",
				"variant": "K"
			}
		},
		"mission": null,
		"pad": {
			"id": 32,
			"url": "https://lldev.thespacedevs.com/2.2.0/pad/32/",
			"agency_id": null,
			"name": "1/5",
			"info_url": null,
			"wiki_url": "",
			"map_url": "https://www.google.com/maps/place/45Â°55'12.0\"N+63Â°20'31.2\"E",
			"latitude": "45.92",
			"longitude": "63.342",
			"location": {
				"id": 15,
				"url": "https://lldev.thespacedevs.com/2.2.0/location/15/",
				"name": "Baikonur Cosmodrome, Republic of Kazakhstan",
				"country_code": "KAZ",
				"map_image": "https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/location_15_20200803142517.jpg",
				"total_launch_count": 472,
				"total_landing_count": 0
			},
			"map_image": "https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launch_images/pad_32_20200803143513.jpg",
			"total_launch_count": 290
		},
		"webcast_live": false,
		"image": "https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launcher_images/vostok_image_20191104130128.jpg",
		"infographic": null,
		"program": [{
			"id": 9,
			"url": "https://lldev.thespacedevs.com/2.2.0/program/9/",
			"name": "Vostok",
			"description": "The Vostok programme was a Soviet human spaceflight project to put the first Soviet citizens into low Earth orbit and return them safely. Competing with the United States Project Mercury, it succeeded in placing the first human into space, Yuri Gagarin, in a single orbit in Vostok 1 on April 12, 1961.",
			"agencies": [{
				"id": 66,
				"url": "https://lldev.thespacedevs.com/2.2.0/agencies/66/",
				"name": "Soviet Space Program",
				"type": "Government"
			}],
			"image_url": "https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/program_images/vostok_program_20210417063956.png",
			"start_date": "1961-04-12T06:07:00Z",
			"end_date": "1963-06-19T08:20:00Z",
			"info_url": null,
			"wiki_url": "https://en.wikipedia.org/wiki/Vostok_programme"
		}]
	}]
}]]></ee:set-variable>
					<ee:set-variable variableName="rocketsResult"><![CDATA[%dw 2.0
output application/json
---
{
	"count": 461,
	"next": "https://ll.thespacedevs.com/2.2.0/config/launcher/?limit=10&offset=10",
	"previous": null,
	"results": [{
		"id": 103,
		"url": "https://ll.thespacedevs.com/2.2.0/config/launcher/103/",
		"name": "Vostok",
		"manufacturer": {
			"id": 66,
			"url": "https://ll.thespacedevs.com/2.2.0/agencies/66/",
			"name": "Soviet Space Program",
			"featured": false,
			"type": "Government",
			"country_code": "RUS",
			"abbrev": "CCCP",
			"description": "The Soviet space program, was the national space program of the Union of Soviet Socialist Republics (USSR) actived from 1930s until disintegration of the Soviet Union in 1991.\r\n\r\nThe Soviet Union's space program was mainly based on the cosmonautic exploration of space and the development of the expandable launch vehicles, which had been split between many design bureaus competing against each other. Over its 60-years of history, the Russian program was responsible for a number of pioneering feats and accomplishments in the human space flight, including the first intercontinental ballistic missile (R-7), first satellite (Sputnik 1), first animal in Earth orbit (the dog Laika on Sputnik 2), first human in space and Earth orbit (cosmonaut Yuri Gagarin on Vostok 1), first woman in space and Earth orbit (cosmonaut Valentina Tereshkova on Vostok 6), first spacewalk (cosmonaut Alexei Leonov on Voskhod 2), first Moon impact (Luna 2), first image of the far side of the Moon (Luna 3) and unmanned lunar soft landing (Luna 9), first space rover (Lunokhod 1), first sample of lunar soil automatically extracted and brought to Earth (Luna 16), and first space station (Salyut 1). Further notable records included the first interplanetary probes: Venera 1 and Mars 1 to fly by Venus and Mars, respectively, Venera 3 and Mars 2 to impact the respective planet surface, and Venera 7 and Mars 3 to make soft landings on these planets.",
			"administrator": null,
			"founding_year": "1931",
			"launchers": "",
			"spacecraft": "",
			"parent": null,
			"image_url": "https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/agency_images/soviet2520space2520program_image_20191229081306.jpeg"
		},
		"program": [{
			"id": 9,
			"url": "https://ll.thespacedevs.com/2.2.0/program/9/",
			"name": "Vostok",
			"description": "The Vostok programme was a Soviet human spaceflight project to put the first Soviet citizens into low Earth orbit and return them safely. Competing with the United States Project Mercury, it succeeded in placing the first human into space, Yuri Gagarin, in a single orbit in Vostok 1 on April 12, 1961.",
			"agencies": [{
				"id": 66,
				"url": "https://ll.thespacedevs.com/2.2.0/agencies/66/",
				"name": "Soviet Space Program",
				"type": "Government"
			}],
			"image_url": "https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/program_images/vostok_program_20210417063956.png",
			"start_date": "1961-04-12T06:07:00Z",
			"end_date": "1963-06-19T08:20:00Z",
			"info_url": null,
			"wiki_url": "https://en.wikipedia.org/wiki/Vostok_programme",
			"mission_patches": []
		}],
		"family": "R-7",
		"full_name": "Vostok-K",
		"variant": "K",
		"reusable": false,
		"image_url": "https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launcher_images/vostok_image_20191104130128.jpg",
		"info_url": null,
		"wiki_url": "https://en.wikipedia.org/wiki/Vostok-K"
	}]
}]]></ee:set-variable>
				</ee:variables>
			</ee:transform>
			<munit-tools:mock-when
				doc:name="Call to launch resource"
				doc:id="de30f2e2-458b-452b-a769-e2ebab3bab6f"
				processor="http:request">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute
						whereValue="Get all launches" attributeName="doc:name" />
					<munit-tools:with-attribute
						whereValue="125ed0d5-3421-4376-beba-1c7fa56f6d7e"
						attributeName="doc:id" />
					<munit-tools:with-attribute
						whereValue="HTTP_Request_configuration" attributeName="config-ref" />
					<munit-tools:with-attribute
						whereValue="/2.0.0/launch" attributeName="path" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[vars.launchesResult]" mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Call to rockets resource" doc:id="61378ea1-5614-472c-80c3-2da5d9a8a91f" processor="http:request">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Get rocket by name" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="0e9a6694-35b1-456a-9af2-a8473a57e9e9" attributeName="doc:id" />
					<munit-tools:with-attribute whereValue="HTTP_Request_configuration" attributeName="config-ref" />
					<munit-tools:with-attribute whereValue="/2.2.0/config/launcher/" attributeName="path" />
					<munit-tools:with-attribute whereValue="Get rocket by name" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="0e9a6694-35b1-456a-9af2-a8473a57e9e9" attributeName="doc:id" />
					<munit-tools:with-attribute whereValue="HTTP_Request_configuration" attributeName="config-ref" />
					<munit-tools:with-attribute whereValue="/2.2.0/config/launcher/" attributeName="path" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[vars.rocketsResult]" mediaType="application/json" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<munit:set-event doc:name="Set Event" doc:id="aa9fd8db-7ecb-4a0f-abdb-0af3cc09344a" cloneOriginalEvent="true">
				<munit:attributes value='#[{queryParams: {launch_name: "vostok-k-sputnik-9"}, vars: {name: "Vostok"}}]' />
			</munit:set-event>
			<flow-ref doc:name="Flow-ref to getLaunchesByLaunchName" doc:id="c1d80994-f223-4e1a-95ef-150aee26cc89" name="getLaunchesByLaunchName"/>
			<ee:transform doc:name="Expected result" doc:id="cf1d67c1-6d4e-400d-9fcf-22056629c4e2" >
				<ee:message >
				</ee:message>
				<ee:variables >
					<ee:set-variable variableName="launchesByLaunchName" ><![CDATA[%dw 2.0
output application/json
---
[
    {
        "launch_info": {
            "id": "7e00f7c3-7648-450a-a69b-6bc94e317d04",
            "name": "vostok-k-sputnik-9",
            "status": "Success",
            "launch_date": "1961-03-09",
            "failreason": "",
            "launch_service_provider": "Strategic Missile Troops",
            "pad": {
                "name": "1/5",
                "location": {
                    "name": "Baikonur Cosmodrome, Republic of Kazakhstan",
                    "country_code": "KAZ",
                    "total_launch_count": 472,
                    "total_landing_count": 0
                }
            },
            "rocket_name": "Vostok"
        },
        "rocket_info": {
            "name": "Vostok",
            "manufacturer": {
                "name": "Soviet Space Program",
                "type": "Government",
                "country_code": "RUS"
            },
            "family": "R-7",
            "full_name": "Vostok-K",
            "variant": "K",
            "reusable": false,
            "image_url": "https://spacelaunchnow-prod-east.nyc3.digitaloceanspaces.com/media/launcher_images/vostok_image_20191104130128.jpg",
            "wiki_url": "https://en.wikipedia.org/wiki/Vostok-K"
        }
    }
]]]></ee:set-variable>
				</ee:variables>
			</ee:transform>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-that doc:name="Event content equality" doc:id="8366e9e3-08ac-4bd8-860b-3361a0aec18d" expression="#[payload]" is="#[MunitTools::equalTo(vars.launchesByLaunchName)]"/>
		</munit:validation>
	</munit:test>
	<munit:test name="getLaunchesByRocketNameTest-Try-scope-1" doc:id="55db5e9d-3df3-414a-bf2d-f78c197f28d5" description="Test">
		<munit:behavior >
        <munit-tools:mock-when processor="http:request" doc:name="Call to launch resource">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Get all launches" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="125ed0d5-3421-4376-beba-1c7fa56f6d7e" attributeName="doc:id" />
					<munit-tools:with-attribute whereValue="HTTP_Request_configuration" attributeName="config-ref" />
					<munit-tools:with-attribute whereValue="/2.0.0/launch" attributeName="path" />
					<munit-tools:with-attribute whereValue="Get all launches" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="125ed0d5-3421-4376-beba-1c7fa56f6d7e" attributeName="doc:id" />
					<munit-tools:with-attribute whereValue="HTTP_Request_configuration" attributeName="config-ref" />
					<munit-tools:with-attribute whereValue="/2.0.0/launch" attributeName="path" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
                <munit-tools:error typeId="ANY" />
            </munit-tools:then-return>
        </munit-tools:mock-when>
    </munit:behavior>
		<munit:execution >
		    <try>
            <flow-ref doc:name="Flow-ref to getLaunchesByRocketName" doc:id="2bb2688d-9c0b-4b0d-b675-f019edfe2877" name="getLaunchesByRocketName"/>
            <error-handler >
                <on-error-continue type="ANY"/>
            </error-handler>
        </try>
		</munit:execution>
		<munit:validation >
        <munit-tools:verify-call processor="logger" doc:name="Logger call verification">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="39e0c5b8-602d-4e85-8147-d15612594c40" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
    </munit:validation>
	</munit:test>
	<munit:test name="getLaunchesByRocketNameTest-Try-scope-2" doc:id="9dd83694-2e30-4cfd-bc8a-9fedbc88038e" description="Test">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Call to launch resource" doc:id="51283e75-f15d-40de-8ce8-bf612475dd39" processor="http:request">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Get rocket by name" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="0e9a6694-35b1-456a-9af2-a8473a57e9e9" attributeName="doc:id" />
					<munit-tools:with-attribute whereValue="HTTP_Request_configuration" attributeName="config-ref" />
					<munit-tools:with-attribute whereValue="/2.2.0/config/launcher/" attributeName="path" />
					<munit-tools:with-attribute whereValue="Get rocket by name" attributeName="doc:name" />
					<munit-tools:with-attribute whereValue="0e9a6694-35b1-456a-9af2-a8473a57e9e9" attributeName="doc:id" />
					<munit-tools:with-attribute whereValue="HTTP_Request_configuration" attributeName="config-ref" />
					<munit-tools:with-attribute whereValue="/2.2.0/config/launcher/" attributeName="path" />
				</munit-tools:with-attributes>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<try>
            <flow-ref doc:name="Flow-ref to getLaunchesByRocketName" doc:id="f3c8ceec-88f0-48fc-8006-c1d2f84419a2" name="getLaunchesByRocketName"/>
            <error-handler >
                <on-error-continue type="ANY"/>
            </error-handler>
        </try>
		</munit:execution>
		<munit:validation >
			<munit-tools:verify-call doc:name="Logger call verification" doc:id="f4d9d761-22e5-4b85-a62d-af5d97fd94d1" processor="logger">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="286d03a0-7c4f-455c-94af-f23c61ea83cb" attributeName="doc:id" />
					<munit-tools:with-attribute whereValue="286d03a0-7c4f-455c-94af-f23c61ea83cb" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
	<munit:test name="implementation-test-suiteTest" doc:id="7b569595-0e04-4f4c-be31-f6ee97f897eb" expectedErrorType="APP:INVALID_STATUS">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when APP:INVALID_STATUS" doc:id="3eeebd05-738b-4b83-a8e2-eac6cc10434f" processor="flow-ref">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="4646ce69-f057-4908-8a3f-6063af5ea9fe" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:error typeId="APP:INVALID_STATUS" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="get:\launchesByStatusAndYear:rocket-launches-api-config" doc:id="6bc0a2f4-85e2-4379-81ed-c8c9c50ae5a4" name="get:\launchesByStatusAndYear:rocket-launches-api-config"/>
		</munit:execution>
		<munit:validation>
			<munit-tools:assert-equals doc:name="Assert equals" doc:id="8451897d-557d-42e3-8665-c69044e1bce6" actual="#[vars.httpStatus]" expected="#[400]"/>
		</munit:validation>
	</munit:test>
	<munit:test name="implementation-test-suiteTest1" doc:id="e7bee47d-07c0-4ef6-8b90-135868222990" expectedErrorType="APP:NULL_VALUE">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when APP:NULL_VALUE" doc:id="af0c5fa5-be74-4526-a6dc-7109a1972d82" processor="flow-ref" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="0c5f8ecb-6fab-4889-a911-11e842c62405" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:error typeId="APP:NULL_VALUE" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="get:\launchesByLaunchName:rocket-launches-api-config" doc:id="c8f23301-0b83-43e5-8e47-a421972ca992" name="get:\launchesByLaunchName:rocket-launches-api-config"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-equals doc:name="Assert equals" doc:id="b06bfaa1-eb98-4caf-9a61-219b7f928b9a" actual="#[vars.httpStatus]" expected="#[400]" />
		</munit:validation>
	</munit:test>
	<munit:test name="implementation-test-suiteTest2" doc:id="58ec3e0e-3282-418c-a632-8fdb7a79b36e" expectedErrorType="HTTP:CONNECTIVITY">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when HTTP:CONNECTIVITY" doc:id="0c60bc9e-9d9a-4767-afca-3b59e0c8edcb" processor="flow-ref" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="3b77678d-e938-40d1-a481-0a42c267a94e" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:error typeId="HTTP:CONNECTIVITY" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="get:\launchesByStatusAndYear:rocket-launches-api-config" doc:id="730939e2-b26e-43b2-8838-3262d9016cef" name="get:\launchesByRocketName:rocket-launches-api-config"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-equals doc:name="Assert equals" doc:id="0dd8663e-3a1e-4497-a155-3b82f9c02291" actual="#[vars.httpStatus]" expected="#[500]" />
		</munit:validation>
	</munit:test>
	<munit:test name="implementation-test-suiteTest3" doc:id="74532a7d-0cef-4539-8826-e13565ebd2ad" expectedErrorType="APP:EMPTY_COLLECTION">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when APP:EMPTY_COLLECTION" doc:id="42fb58be-b089-48bc-b612-1ed70d901c86" processor="flow-ref" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="4646ce69-f057-4908-8a3f-6063af5ea9fe" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:error typeId="APP:EMPTY_COLLECTION" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="get:\launchesByStatusAndYear:rocket-launches-api-config" doc:id="f280ebff-01d1-4995-96a8-62c21a084fb4" name="get:\launchesByStatusAndYear:rocket-launches-api-config"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-equals doc:name="Assert equals" doc:id="cd4a23dc-6b9e-49cf-a7ca-167078fb3962" actual="#[vars.httpStatus]" expected="#[400]" />
		</munit:validation>
	</munit:test>
	<munit:test name="implementation-test-suiteTest4" doc:id="a35cee45-6ebd-46e3-b4bc-399b9d4c0869" expectedErrorType="APIKIT:NOT_FOUND">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when APIKIT:NOT_FOUND" doc:id="1f7a656d-06c7-465f-befa-20251b23a95f" processor="apikit:console">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="rocket-launches-api-config" attributeName="config-ref" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:error typeId="APIKIT:NOT_FOUND" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="rocket-launches-api-console" doc:id="37a08a9f-c3ed-46b2-8af8-921b0b4e767d" name="rocket-launches-api-console"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-equals doc:name="Assert equals" doc:id="d532ed7c-5746-42a9-886d-8c21ceaa1218" actual="#[vars.httpStatus]" expected="#[404]"/>
		</munit:validation>
	</munit:test>
	<munit:test name="error-handling-test-APIKIT:BAD_REQUEST" doc:id="2413f506-b995-4e6b-8467-b70074f16174" expectedErrorType="APIKIT:BAD_REQUEST">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when APIKIT:BAD_REQUEST" doc:id="e62fe65c-9199-4d69-b6b8-3e60f63c2fe8" processor="apikit:router">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="rocket-launches-api-config" attributeName="config-ref" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:error typeId="APIKIT:BAD_REQUEST" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="rocket-launches-api-main" doc:id="c6c859d5-82c7-4412-9a21-5966adda6869" name="rocket-launches-api-main"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-equals doc:name="Assert equals" doc:id="b208b400-51ec-4be8-98dc-bf96ff4f6b6b" actual="#[vars.httpStatus]" expected="#[400]"/>
		</munit:validation>
	</munit:test>
	<munit:test name="error-handling-test-APIKIT:NOT_FOUND" doc:id="9e40d9d1-1376-40ce-8235-7603c7db677e" expectedErrorType="APIKIT:NOT_FOUND">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when APIKIT:NOT_FOUND" doc:id="c7c68795-a1e1-4988-a3a9-50b423acc7bd" processor="apikit:router">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="rocket-launches-api-config" attributeName="config-ref" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:error typeId="APIKIT:NOT_FOUND" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="rocket-launches-api-main" doc:id="7ab0ae80-dc2f-48d2-8eed-401f79f61bf9" name="rocket-launches-api-main"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-equals doc:name="Assert equals" doc:id="3f463cf3-faed-4582-a2bd-ecd5767d7b29" actual="#[vars.httpStatus]" expected="#[404]"/>
		</munit:validation>
	</munit:test>
	<munit:test name="error-handling-test-APIKIT:METHOD_NOT_ALLOWED" doc:id="69705c9b-f7a2-4483-8238-3ccd79f97a38" expectedErrorType="APIKIT:METHOD_NOT_ALLOWED">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when APIKIT:METHOD_NOT_ALLOWED" doc:id="4905272e-5774-4466-8632-be374dd7ae00" processor="apikit:router" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="rocket-launches-api-config" attributeName="config-ref" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:error typeId="APIKIT:METHOD_NOT_ALLOWED" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="rocket-launches-api-main" doc:id="4562dd2e-ef27-4889-a10f-d778f82f70af" name="rocket-launches-api-main" />
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-equals doc:name="Assert equals" doc:id="4cdfe401-4616-4e96-a464-24bf57a5e2ef" actual="#[vars.httpStatus]" expected="#[405]" />
		</munit:validation>
	</munit:test>
	<munit:test name="error-handling-test-APIKIT:NOT_ACCEPTABLE" doc:id="e13c24cb-9603-4a6b-9e83-3cc8acbb1abe" expectedErrorType="APIKIT:NOT_ACCEPTABLE">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when APIKIT:NOT_ACCEPTABLE" doc:id="6c24186a-6c0f-4cab-8f47-0b900ca4ca0c" processor="apikit:router" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="rocket-launches-api-config" attributeName="config-ref" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:error typeId="APIKIT:NOT_ACCEPTABLE" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="rocket-launches-api-main" doc:id="69d9ca46-523a-44c0-90f7-89ec8fcdac96" name="rocket-launches-api-main" />
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-equals doc:name="Assert equals" doc:id="6b4fb1aa-40b3-4da7-84d4-da509b53ba35" actual="#[vars.httpStatus]" expected="#[406]" />
		</munit:validation>
	</munit:test>
	<munit:test name="error-handling-test-APIKIT:UNSUPPORTED_MEDIA_TYPE" doc:id="e46120f4-0e27-4b56-a137-762c86a23852" expectedErrorType="APIKIT:UNSUPPORTED_MEDIA_TYPE">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when APIKIT:UNSUPPORTED_MEDIA_TYPE" doc:id="06cdf457-db50-407e-be0b-99c2e297f620" processor="apikit:router" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="rocket-launches-api-config" attributeName="config-ref" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:error typeId="APIKIT:UNSUPPORTED_MEDIA_TYPE" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="rocket-launches-api-main" doc:id="77a45218-90ac-4604-adfd-8009015db05c" name="rocket-launches-api-main" />
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-equals doc:name="Copy_of_Assert equals" doc:id="0e39ee8f-e773-4e02-84fd-dee054761f6f" actual="#[vars.httpStatus]" expected="#[415]" />
		</munit:validation>
	</munit:test>
	<munit:test name="error-handling-test-APIKIT:NOT_IMPLEMENTED" doc:id="4b62aa61-e8bf-4e22-adf0-4e900048374a" expectedErrorType="APIKIT:NOT_IMPLEMENTED">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when APIKIT:NOT_IMPLEMENTED" doc:id="3e72c1cf-049c-41bf-a450-978244e541e6" processor="apikit:router" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="rocket-launches-api-config" attributeName="config-ref" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:error typeId="APIKIT:NOT_IMPLEMENTED" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="rocket-launches-api-main" doc:id="45cb3ef0-31a6-4c8d-ae2e-8afe203b12d1" name="rocket-launches-api-main" />
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-equals doc:name="Assert equals" doc:id="0628e949-6ec3-49bf-980f-95c00984f038" actual="#[vars.httpStatus]" expected="#[501]" />
		</munit:validation>
	</munit:test>


</mule>
